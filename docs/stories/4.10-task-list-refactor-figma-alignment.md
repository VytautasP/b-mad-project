# Story 4.10: Task List View Refactor — Figma Alignment

## Status

Ready for Review

## Story

**As a** task-heavy user,
**I want** the task list view to match the approved Figma design,
**so that** the experience feels polished, scannable, and consistent with the rest of the TaskFlow design system.

## Design Reference

- **Figma file:** [TaskFlow — Task List](https://www.figma.com/design/4CgRl2E328aPKmz0Fd1Q7Q/TaskFlow?node-id=7-2&t=VGbB8EF3nJN2WXxJ-4)
- **Node:** `7:2` (`Body` frame)
- **Local screenshot:** `docs/stories/task-list-figma-design.png`

## Figma Design Summary

The Figma design specifies a task list page with the following structure inside the Main content area:

### Page Heading
- **"My Tasks"** as an `h2` (Manrope 700 / 24px / `#111418`).
- Vertical divider followed by a count badge: number in a blue-background pill (`#137FEC` bg, white text, Manrope 600 / 12px) + "active tasks" label (Manrope 400 / 14px / `#64748B`).

### Quick-Filter Tabs
- A row of toggle buttons: **All Tasks** (active state — blue bg `#137FEC`, white text, blue-tinted border), **Pending** (inactive — transparent bg, with a gray count badge `#E2E8F0`), **Done** (same inactive style with its own count badge).
- Right-aligned: **Filter** button and **Sort** button (both outlined, icon + text, border `#E2E8F0`, shadow `0px 1px 2px rgba(0,0,0,0.05)`).

### Table Card
- Wrapped in a card container with `border-radius: 12px`, `border: 1px solid #E2E8F0`, and `box-shadow: 0px 1px 2px rgba(0,0,0,0.05)`.
- **Column order:** Checkbox | Status | Task Name | Priority | Due Date | Time Logged | Actions.
- **Header row:** White bg, uppercase labels (Manrope 700 / 12px / `#64748B`, 5% letter-spacing), bottom border `#E2E8F0`.
- **Status column:** Pill badges with dot indicator — "In Progress" (`#DBEAFE` bg, `#3B82F6` dot, `#1E40AF` text), "To Do" (`#F3F4F6` bg, `#6B7280` dot, `#1F2937` text), "Done" (`#DCFCE7` bg, `#22C55E` dot, `#166534` text).
- **Task Name column:** Two-line cell — task title (Manrope 500 / 14px / `#111418`) and subtitle/category (Manrope 400 / 12px / `#64748B`).
- **Priority column:** Colored icon + text — Critical/High (`#DC2626`), Medium (`#D97706`), Low (`#16A34A`).
- **Due Date column:** `MMM dd, yyyy` format (Manrope 400 / 14px / `#64748B`).
- **Time Logged column:** Monospace font (Liberation Mono 400 / 12px / `#64748B`). Shows `--` for no time.
- **Actions column:** Right-aligned, with a left-side inset shadow (`-10px 0px 10px -10px rgba(0,0,0,0.05)`) creating a scroll-aware separator. Contains an overflow / more-actions button.
- Row borders: top border `1px solid #E2E8F0` on each row (except first).

### Pagination Footer
- Inside the card bottom: `Showing 1-6 of 48 tasks` (Manrope 400 / 14px / `#64748B`), right-aligned **Previous** / **Next** buttons (outlined, `border-radius: 4px`, `border: 1px solid #E2E8F0`, Manrope 400 / 14px).

## Acceptance Criteria

1. **Page heading** renders "My Tasks" with an active-task count badge matching Figma typography and colour tokens.
2. **Quick-filter tab bar** replaces or augments current filter approach with "All Tasks", "Pending", and "Done" toggle buttons that include count badges; active state uses blue fill.
3. **Filter / Sort action buttons** sit right-aligned on the tab-bar row, styled as outlined buttons with icon + label per the design.
4. **Table column order** is updated to: Checkbox → Status → Task Name → Priority → Due Date → Time Logged → Actions (Assignees column removed from default desktop view).
5. **Checkbox column** is added as the first column enabling bulk row selection.
6. **Status badges** render as colour-coded pills with a dot indicator (blue for In Progress, gray for To Do, green for Done) — no Material icon.
7. **Task Name cells** display a two-line layout: title + project/category subtitle.
8. **Priority cells** display a small directional icon and label with colour mapped: Critical/High → red, Medium → amber, Low → green.
9. **Time Logged cells** use a monospace font and show `--` when there is no logged time.
10. **Actions column** is visually separated by an inset shadow on the left and right-aligned, containing a compact actions control (e.g., three-dot overflow menu).
11. **Table card wrapper** has `border-radius: 12px`, a `1px solid #E2E8F0` border, and the specified box-shadow.
12. **Custom pagination footer** replaces `mat-paginator` with "Showing X–Y of Z tasks" text and Previous / Next buttons inside the card.
13. **Existing functionality is preserved:** sorting, filtering, task creation, task detail navigation, edit, delete, timer actions, and mobile card view continue to work without regression.
14. **Typography** uses Manrope at the weights/sizes specified in the design (already loaded in `index.html`).
15. **Responsive behaviour** keeps the mobile card view intact and the Figma layout applies only at desktop breakpoints.

## Tasks / Subtasks

- [x] Audit current `task-list` component and map each Figma section to needed changes. (AC: all)
- [x] Add page heading block with "My Tasks" title + active-task count badge. (AC: 1)
- [x] Implement quick-filter tab bar with All Tasks / Pending / Done toggle buttons and count badges. (AC: 2)
- [x] Add right-aligned Filter and Sort action buttons to the tab-bar row. (AC: 3)
- [x] Restructure table columns: add checkbox column, reorder columns, remove Assignees from desktop default. (AC: 4, 5)
- [x] Replace status icon+text with colour-coded pill badges with dot indicator. (AC: 6)
- [x] Update task name cell to two-line layout (title + subtitle). (AC: 7)
- [x] Restyle priority cell with directional icon and colour-coded label. (AC: 8)
- [x] Apply monospace font to time-logged column; display `--` for zero time. (AC: 9)
- [x] Restyle actions column with inset shadow separator and compact overflow control. (AC: 10)
- [x] Wrap table in card container with 12px radius, border, and shadow. (AC: 11)
- [x] Replace `mat-paginator` with custom pagination footer (text + Previous/Next buttons). (AC: 12)
- [x] Verify all existing functionality (CRUD, sort, filter, timer, navigation) still works. (AC: 13)
- [x] Apply Figma typography tokens (Manrope weights/sizes, Liberation Mono for time). (AC: 14)
- [x] Validate responsive breakpoint: Figma layout at desktop, card view at mobile. (AC: 15)
- [x] Update / add unit tests for new layout, tab filtering, checkbox selection, and custom pagination.

## Dev Notes

- **Priority:** P1
- **Design source:** `https://www.figma.com/design/4CgRl2E328aPKmz0Fd1Q7Q/TaskFlow?node-id=7-2`
- **Figma reference node:** `7:2` (`Body > Main` content area)
- **Related stories:** `docs/stories/4.2-list-view-readability-filter-simplification.md` (prior list readability pass), `docs/stories/4.9-login-view-refactor-figma-alignment.md` (same Figma-alignment pattern)
- **Epic backlog reference:** `docs/prd/4.0-ux-friendly-ui-refinement-prioritized.md`
- The Assignees column is not present in the Figma design; it should be hidden from the default desktop column set but kept available (can be re-enabled via column settings in a future story).
- The quick-filter tabs ("All Tasks / Pending / Done") should work alongside the existing advanced filter panel — they provide a fast pre-filter; the advanced panel remains accessible via the Filter button.
- The Figma checkbox column implies a future bulk-actions feature; for this story, implement the checkbox selection state but bulk-action toolbar can be deferred to a follow-up story.
- Reuse existing design tokens (`--motion-duration-feedback`, `--motion-ease-standard`, brand colour `#137FEC`, Slate palette) where applicable.

### Key Design Tokens from Figma

| Token | Value | Usage |
|-------|-------|-------|
| Brand blue | `#137FEC` | Active tab fill, count badge bg, links |
| Text primary | `#111418` | Headings, task names |
| Text secondary | `#64748B` | Subtitles, column headers, dates, counts |
| Border | `#E2E8F0` | Card border, row borders, button outlines |
| Surface | `#FFFFFF` | Card bg, header bg |
| Background | `#F6F7F8` | Page bg |
| Status In-Progress bg | `#DBEAFE` | Status pill |
| Status In-Progress dot | `#3B82F6` | Dot indicator |
| Status In-Progress text | `#1E40AF` | Pill label |
| Status To-Do bg | `#F3F4F6` | Status pill |
| Status To-Do dot | `#6B7280` | Dot indicator |
| Status To-Do text | `#1F2937` | Pill label |
| Status Done bg | `#DCFCE7` | Status pill |
| Status Done dot | `#22C55E` | Dot indicator |
| Status Done text | `#166534` | Pill label |
| Priority Critical/High | `#DC2626` | Priority text+icon |
| Priority Medium | `#D97706` | Priority text+icon |
| Priority Low | `#16A34A` | Priority text+icon |
| Card radius | `12px` | Table card wrapper |
| Card shadow | `0 1px 2px rgba(0,0,0,0.05)` | Card, header, buttons |
| Actions inset shadow | `-10px 0 10px -10px rgba(0,0,0,0.05)` | Actions column left edge |
| Pagination btn radius | `4px` | Prev/Next buttons |
| Heading font | Manrope 700 / 24px | "My Tasks" |
| Body font | Manrope 500 / 14px | Task names, button labels |
| Caption font | Manrope 400 / 12px | Subtitles, small text |
| Header font | Manrope 700 / 12px, uppercase, 5% spacing | Table column headers |
| Monospace font | Liberation Mono 400 / 12px | Time logged values |

## File List

| File | Status | Description |
|------|--------|-------------|
| `src/app/features/tasks/task-list/task-list.component.ts` | Modified | Column reorder, checkbox selection state, quick-filter logic, custom pagination |
| `src/app/features/tasks/task-list/task-list.component.html` | Modified | Full template restructure: heading, tab bar, card-wrapped table, custom pagination |
| `src/app/features/tasks/task-list/task-list.component.scss` | Modified | Complete Figma-aligned styles (card, pills, typography, actions shadow, pagination) |
| `src/app/features/tasks/task-list/task-list.component.spec.ts` | Modified | Updated/new tests for tab filter, checkbox, custom pagination, column order |

## Dev Agent Record

### Agent Model Used
Claude Opus 4.6

### Completion Notes
- All 16 tasks implemented and verified with a clean `ng build`.
- `MatPaginator` removed; replaced with custom Previous/Next pagination footer inside the card.
- `MatCheckboxModule` and `MatMenuModule` added; `MatPaginatorModule` removed.
- Column order: select → status → name → priority → dueDate → timeLogged → actions (Assignees hidden).
- Status badges now use dot indicator (`.status-dot`) instead of Material icons.
- Priority icons changed from `flag` to directional arrows (`keyboard_double_arrow_up`, `arrow_upward`, `arrow_forward`, `arrow_downward`).
- Date format changed to `MMM dd, yyyy`.
- Time logged shows `--` for zero/null, uses Liberation Mono / Courier New / monospace.
- Quick-filter tabs (All/Pending/Done) work alongside the advanced filter panel.
- Actions column uses three-dot overflow menu (`mat-menu`) with inset shadow separator.
- All Figma design tokens applied (colours, typography, spacing, shadows, radii).
- Tests updated: PageEvent import removed; new test suites for custom pagination, checkbox selection, quick-filter tabs, column order, time display, date formatting, priority icons, and task counts.

### Debug Log References
None — clean implementation with no blocking issues.

## Change Log

| Date | Change | Author |
|------|--------|--------|
| 2026-03-01 | Created story for task list view refactor aligned to approved Figma design node 7:2. | Sally (UX Expert) |
| 2026-03-01 | Implemented all 16 tasks: full Figma-aligned refactor of task list (heading, tabs, card table, pills, pagination, checkbox, typography). Build passes cleanly. | James (Dev Agent) |
