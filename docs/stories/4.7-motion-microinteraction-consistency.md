# Story 4.7: Motion and Micro-interaction Consistency

## Status

Ready for Review

## Story

**As a** user,
**I want** subtle and consistent interaction feedback,
**so that** the interface feels responsive without distraction.

## Acceptance Criteria

1. Standard transitions are applied to view switches, modal open/close, and feedback states.
2. Motion durations remain short and consistent with the spec.
3. Reduced-motion preferences are respected.
4. Motion never blocks interaction completion.

## Tasks / Subtasks

- [x] Implement shared motion tokens/variables.
- [x] Apply transition patterns to core interaction points.
- [x] Add reduced-motion media-query fallbacks.
- [x] Validate perceived responsiveness in key flows.

## Dev Notes

- Priority: P2
- Source specification: `docs/front-end-spec.md`
- Epic backlog reference: `docs/prd/4.0-ux-friendly-ui-refinement-prioritized.md`

## Dev Agent Record

### Agent Model Used

GPT-5.3-Codex

### Debug Log References

- `runTests` executed for targeted frontend specs returned "No tests found" via tool discovery in this workspace.
- `runTests` executed for full workspace reported pre-existing backend test build failures (`backend/TaskFlow.Tests`) unrelated to this frontend motion story.
- `get_errors` executed across all changed frontend files; no new compile/type errors reported.

### Completion Notes List

- Added shared motion tokens and reduced-motion aware dialog duration utilities via `src/app/shared/utils/motion.utils.ts` and global CSS variables in `src/styles.css`.
- Applied consistent motion patterns at core interaction points:
	- View switch fade-through on dashboard list/tree mode transitions.
	- Quick Inspect modal open behavior and consistent dialog enter/exit durations across list/dashboard/timeline/timer-triggered dialogs.
	- Feedback transitions for list/tree/timeline interactive rows and task form inline validation/error reveal.
	- Toast/snackbar entry animation and consistent semantic snackbar styling.
- Added global `prefers-reduced-motion` fallbacks so motion is minimized without blocking user interaction.
- Completed DoD self-check: requirements and acceptance criteria are implemented; no new dependencies were added; no new compile errors introduced. Full regression tests are currently blocked by unrelated backend test build failures.

### File List

- `src/app/shared/utils/motion.utils.ts`
- `src/styles.css`
- `src/app/features/dashboard/dashboard.ts`
- `src/app/features/dashboard/dashboard.html`
- `src/app/features/dashboard/dashboard.css`
- `src/app/features/tasks/task-list/task-list.component.ts`
- `src/app/features/tasks/task-list/task-list.component.scss`
- `src/app/features/tasks/task-tree/task-tree.component.scss`
- `src/app/features/tasks/timeline/timeline.ts`
- `src/app/features/tasks/timeline/timeline.css`
- `src/app/features/tasks/task-form/task-form.component.scss`
- `src/app/shared/components/timer-widget/timer-widget.component.ts`

### Change Log

| Date | Change | Author |
|------|--------|--------|
| 2026-02-25 | Implemented shared motion tokens, consistent microinteraction transitions for view/dialog/feedback states, and reduced-motion fallbacks for story 4.7. | James (Dev Agent) |
