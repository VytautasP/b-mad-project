# Story 4.1: Task Details Page + Quick Inspect Modal Split

## Status

Ready for Review

## Story

**As a** task manager,
**I want** a dedicated Task Details page for deep work and a lightweight modal for quick inspection,
**so that** I can move quickly for simple checks without losing a full workspace for complex task operations.

## Acceptance Criteria

1. A dedicated route-based Task Details page is available from list, tree, and timeline contexts.
2. Quick Inspect modal shows summary-only fields (title, status, priority, due date, assignees, short description).
3. Quick Inspect modal includes a single clear action to open full Task Details page.
4. Deep actions (full comments thread, detailed activity, full time management) are only on Task Details page.
5. Focus and keyboard behavior are correct (Escape closes modal, focus returns to opener).

## Tasks / Subtasks

- [x] Add Task Details route and page shell.
- [x] Build Quick Inspect modal with summary data contract.
- [x] Add "Open full details" navigation from modal.
- [x] Move deep edit/time/comment actions to details page.
- [x] Add keyboard/focus behavior tests for modal and route transition.

## Dev Notes

- Priority: P0
- Source specification: `docs/front-end-spec.md`
- Epic backlog reference: `docs/prd/4.0-ux-friendly-ui-refinement-prioritized.md`

## Dev Agent Record

### Agent Model Used

GPT-5.3-Codex

### Debug Log References

- `npm run test -- --watch=false --browsers=ChromeHeadless` (suite has multiple pre-existing unrelated failures in current branch).

### Completion Notes List

- Added dedicated route `/tasks/:id` with a new full details page that hosts deep actions (time logging, comments, activity, assignee management).
- Refactored existing `TaskDetailDialog` into a summary-only Quick Inspect modal with a single `Open full details` action.
- Wired list, tree (via dashboard), and timeline contexts to open Quick Inspect and flow into full details page.
- Added keyboard/focus behavior support in modal (`Escape` close and focus return to opener when provided).
- Added focused Quick Inspect tests for escape/focus return and route transition.

### File List

- `src/app/app.routes.ts`
- `src/app/features/dashboard/dashboard.ts`
- `src/app/features/tasks/task-list/task-list.component.ts`
- `src/app/features/tasks/task-list/task-list.component.html`
- `src/app/features/tasks/timeline/timeline.ts`
- `src/app/features/tasks/task-detail-dialog/task-detail-dialog.ts`
- `src/app/features/tasks/task-detail-dialog/task-detail-dialog.html`
- `src/app/features/tasks/task-detail-dialog/task-detail-dialog.css`
- `src/app/features/tasks/task-detail-dialog/task-detail-dialog.spec.ts`
- `src/app/features/tasks/task-details-page/task-details-page.ts`
- `src/app/features/tasks/task-details-page/task-details-page.html`
- `src/app/features/tasks/task-details-page/task-details-page.css`

### Change Log

- 2026-02-22: Implemented Story 4.1 by splitting deep task management into route-based details page and converting existing modal to summary-only quick inspect.

### DoD Checklist Summary

- Requirements/ACs: ✅ Met for this story scope.
- Coding standards/project structure: ✅ Met.
- Testing: ⚠️ Story-specific test added and passing in `ng test` run output; overall suite has pre-existing unrelated failures in this branch.
- Build/lint: ⚠️ `ng build` fails due pre-existing timeline stylesheet budget error; story files compile with no TypeScript/template errors.
- Story administration: ✅ Completed and updated.
