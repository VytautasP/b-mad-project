# Story 4.9: Login View Refactor and Figma Alignment

## Status

Ready for Review

## Approved

**As a** returning user,
**I want** the login page to match the approved Figma design while preserving current auth behavior,
**so that** sign-in feels clear, trustworthy, and visually consistent with TaskFlow.

## Acceptance Criteria

1. Login page layout matches Figma file `TaskFlow` (`node-id=1:2`) with these core regions: top header, centered login card, and bottom legal strip.
2. Header includes TaskFlow brand on the left and a right-side sign-up prompt with a secondary `Sign Up` button.
3. Center card includes:
   - `Welcome back` title and supporting copy.
   - Email and password fields with labels and leading icons.
   - `Forgot password?` link placement per design.
   - Primary `Sign In` button.
4. Divider and social section are implemented with `Or continue with` and a `Google` social button styled to match the design system tokens.
5. Bottom strip includes legal copy with Terms/Privacy text treatment matching the Figma composition.
6. Existing login behavior from Story 1.3 remains intact (validation, API call, success redirect, auth token persistence, and error handling).
7. Responsive behavior preserves the same visual hierarchy from desktop to mobile without clipping or overlap.
8. Accessibility baseline is preserved (keyboard navigation, visible focus, label association, and semantic button/link roles).

## Tasks / Subtasks

- [x] Audit current login implementation and map each Figma section to existing component structure. (AC: 1, 2, 3, 4, 5)
- [x] Refactor login page container/layout to match header-card-legal-strip structure. (AC: 1, 2, 3, 5, 7)
- [x] Update typography, spacing, borders, and elevation to align with existing design tokens used in the app. (AC: 1, 3, 4, 5)
- [x] Implement form visual refinements (labels, icons, forgot-password placement, primary action emphasis). (AC: 3, 8)
- [x] Implement social login visual section (`Or continue with` + `Google` button) as UI-only unless provider integration already exists. (AC: 4)
- [x] Verify no regression in login logic and error states from Story 1.3. (AC: 6)
- [x] Validate responsive and accessibility behavior across target breakpoints. (AC: 7, 8)

## Dev Notes

- Priority: P1
- Design source: https://www.figma.com/design/4CgRl2E328aPKmz0Fd1Q7Q/TaskFlow?node-id=1-2&t=p1Hrc3dYpH5tJIIt-4
- Figma reference node: `1:2` (`Body` frame)
- Related baseline story: `docs/stories/1.3-authentication-frontend-protected-routes.md`
- Epic backlog reference: `docs/prd/4.0-ux-friendly-ui-refinement-prioritized.md`

## File List

| File | Status | Description |
|------|--------|-------------|
| src/index.html | Modified | Added Manrope font import from Google Fonts |
| src/app/features/auth/login/login.ts | Modified | Replaced Material card/form-field/checkbox/button/input imports with MatIconModule; removed rememberMe field |
| src/app/features/auth/login/login.html | Modified | Full rewrite: header–card–legal-strip layout matching Figma node 1:2 |
| src/app/features/auth/login/login.css | Modified | Complete Figma-aligned stylesheet (was empty) |
| src/app/features/auth/login/login.spec.ts | New | 26 unit tests covering layout, form validation, auth logic, accessibility |

## Change Log

| Date | Change | Author |
|------|--------|--------|
| 2026-03-01 | Created story for login view refactor aligned to approved Figma design node 1:2. | GitHub Copilot |
| 2026-03-01 | Implemented full Figma-aligned login page refactor (layout, typography, form, social, legal strip, responsive, a11y). | James (dev agent) |

## Dev Agent Record

### Agent Model Used
Claude Opus 4.6

### Debug Log References
None

### Completion Notes
- Login page fully refactored to match Figma node 1:2 design composition.
- Header with brand + Sign Up CTA, centered 440px card with Welcome back heading, email/password fields with leading Material icons, forgot-password link, primary Sign In button, "Or continue with" divider + Google social button, bottom legal strip.
- All Figma design tokens applied: Manrope font, Slate colour palette, brand blue #137FEC, 12px card radius, elevation shadow, spacing.
- Existing auth logic (validation, API call, redirect, error handling) preserved — no changes to login.ts onSubmit/authService flow.
- Responsive breakpoint at 640px adjusts padding, hides prompt text, scales heading.
- Accessibility: label/for associations, semantic button types, aria-label on social button, role=alert on validation errors, visible focus rings.
- Tests created: 22 of 26 pass; 4 error-handling snackbar mock tests skipped per user direction (pre-existing Vitest/zoneless mock limitation).
